"use strict";var troveApp=angular.module("troveApp",["ngRoute","troveControllers","troveFilters","troveServices"]);troveApp.config(["$routeProvider","$locationProvider",function(e,r){r.html5Mode(!0),e.when("/",{templateUrl:"/partials/items.html",controller:"ItemsCtrl"}).when("/item/:itemId",{templateUrl:"/partials/item.html",controller:"ItemCtrl"}).when("/category/:categoryId",{templateUrl:"/partials/category.html",controller:"CategoryCtrl"}).when("/about",{templateUrl:"/partials/about.html",controller:"AboutCtrl"}).when("/contact",{templateUrl:"/partials/contact.html",controller:"ContactCtrl"}).otherwise({redirectTo:"/"})}]);var troveControllers=angular.module("troveControllers",[]);troveControllers.controller("TitleCtrl",["$scope","$timeout","Page",function(e,r,t){e.Page=t,e.parameters={},e.parameters.titleColor="dark",e.parameters.coverTitle="",e.parameters.coverImageUrl="http://dummyimage.com/1x1/000/",e.parameters.isNavTransitioning=!1,e.parameters.isNavOpen=!1,e.parameters.closeNav=function(){e.parameters.isNavOpen=!1,r(function(){e.parameters.isNavTransitioning=!1},200)},e.$on("$routeChangeSuccess",function(){e.parameters.closeNav()})}]),troveControllers.controller("NavCtrl",["$scope","$timeout","Category",function(e,r,t){e.categories=t.query(),e.closeNav=e.parameters.closeNav}]),troveControllers.controller("HeaderCtrl",["$scope",function(e){e.openNav=function(){e.parameters.isNavTransitioning=!0,e.parameters.isNavOpen=!0}}]),troveControllers.controller("CoverCtrl",["$scope",function(e){e.getCoverImageUrl=function(e){return e?"url('"+e+"')":"none"}}]),troveControllers.controller("ItemsCtrl",["$scope","Page","Item","Category",function(e,r,t,o){e.items=t.query(),e.categories=o.query(),e.orderProp="_id",r.setTitle("Trove / Featured"),e.parameters.titleColor="dark",e.parameters.coverTitle="Featured",e.parameters.coverImageUrl=""}]),troveControllers.controller("ItemCtrl",["$scope","$routeParams","Page","Item",function(e,r,t,o){e.item=o.get({id:r.itemId},function(r){e.item=r,t.setTitle(r.name+" on Trove")},function(){e.errorId=r.itemId}),e.parameters.titleColor="dark",e.parameters.coverTitle="",e.parameters.coverImageUrl=""}]),troveControllers.controller("CategoryCtrl",["$scope","$routeParams","$filter","Page","Item","Category",function(e,r,t,o,a,l){e.category=l.get({id:r.categoryId},function(r){e.category=r,o.setTitle("Trove / "+r.display_name),e.parameters.coverTitle=r.display_name,e.parameters.coverImageUrl=r.cover_image_url,a.query().$promise.then(function(o){e.categoryItems=t("filter")(o,{category_id:r._id})})}),e.parameters.titleColor="light"}]),troveControllers.controller("AboutCtrl",["$scope","Page",function(e,r){r.setTitle("Trove / About"),e.parameters.coverTitle="About",e.parameters.coverImageUrl="",e.parameters.titleColor="dark"}]),troveControllers.controller("ContactCtrl",["$scope","Page",function(e,r){r.setTitle("Trove / Contact"),e.parameters.coverTitle="Contact",e.parameters.coverImageUrl="",e.parameters.titleColor="dark"}]);var troveFilters=angular.module("troveFilters",[]),troveServices=angular.module("troveServices",["ngResource"]),databaseUrl="https://api.mongolab.com/api/1/databases/elsa-sample/collections",apiKey="YcBYH6S0D8qjtOlMj9KIua5LQDmI_S8D";troveServices.factory("Page",[function(){var e="Trove";return{title:function(){return e},setTitle:function(r){e=r}}}]),troveServices.factory("Item",["$resource",function(e){var r=e(databaseUrl+"/items/:id",{apiKey:apiKey},{update:{method:"PUT"}});return r}]),troveServices.factory("Category",["$resource",function(e){var r=e(databaseUrl+"/categories/:id",{apiKey:apiKey},{update:{method:"PUT"}});return r}]);