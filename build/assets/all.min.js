"use strict";var troveApp=angular.module("troveApp",["ngRoute","ngAnimate","troveControllers","troveDirectives","troveFilters","troveServices"]);troveApp.config(["$routeProvider","$locationProvider",function(e,r){r.html5Mode(!0),e.when("/",{redirectTo:"/browse/recommended"}).when("/browse/:browseId",{templateUrl:"/views/browse.html",controller:"BrowseCtrl"}).when("/search",{templateUrl:"/views/search.html",controller:"SearchCtrl"}).when("/@",{redirectTo:"/@justinjaywang"}).when("/@:userId",{templateUrl:"/views/user.html",controller:"UserCtrl"}).when("/item/:itemId",{templateUrl:"/views/item.html",controller:"ItemCtrl"}).when("/about",{templateUrl:"/views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]);var troveControllers=angular.module("troveControllers",[]);troveControllers.controller("TitleCtrl",["$scope","$location","$timeout","Page",function(e,r,t,o){e.Page=o,e.parameters={},e.parameters.resetParameters=function(){e.parameters.isLight=!1,e.parameters.coverTitle="",e.parameters.coverSubtitle="",e.parameters.coverImageUrl="",e.parameters.coverAvatarUrl="",e.parameters.subcoverContent=""},e.parameters.isNavTransitioning=!1,e.parameters.isNavOpen=!1,e.parameters.resetParameters(),e.parameters.closeNav=function(){e.parameters.isNavOpen=!1,t(function(){e.parameters.isNavTransitioning=!1},200)},e.parameters.isActive=function(e){return r.path().indexOf(e)>=0?!0:!1},e.$on("$routeChangeStart",function(r,t,o){"undefined"!=typeof t&&"undefined"!=typeof o&&t.templateUrl!=o.loadedTemplateUrl&&e.parameters.resetParameters()}),e.$on("$routeChangeSuccess",function(){e.parameters.closeNav()})}]),troveControllers.controller("NavCtrl",["$scope","$location","$timeout","Browse",function(e,r,t,o){e.browseItems=o.query(),e.closeNav=e.parameters.closeNav,e.isActiveNav=function(e){return r.path().indexOf(e)>=0?!0:!1}}]),troveControllers.controller("HeaderCtrl",["$scope",function(e){e.openNav=function(){e.parameters.isNavTransitioning=!0,e.parameters.isNavOpen=!0}}]),troveControllers.controller("CoverCtrl",["$scope",function(){}]),troveControllers.controller("SubcoverCtrl",["$scope",function(){}]),troveControllers.controller("BrowseCtrl",["$scope","$location","$routeParams","$filter","Page","Item","Browse",function(e,r,t,o,a,s,n){e.browseList=n.query(),e.browseCategory=n.get({id:t.browseId},function(r){e.browseCategory=r,a.setTitle("Trove — "+r.title),s.query().$promise.then(function(t){e.browseItems=o("filter")(t,{browse_id:r._id}),e.parameters.subcoverContent=e.browseList})}),e.parameters.coverTitle="Browse"}]),troveControllers.controller("SearchCtrl",["$scope","Page","Item",function(e,r,t){r.setTitle("Trove — Search"),t.query().$promise.then(function(r){e.items=r,e.parameters.subcoverContent="Type above to search"}),e.minEntryFn=function(){var r=e.searchText;return"undefined"==typeof r?!1:r.title.length<1?!1:!0}}]),troveControllers.controller("UserCtrl",["$scope","$routeParams","$filter","Page","Item","User",function(e,r,t,o,a,s){e.user=s.get({id:r.userId},function(r){e.user=r,o.setTitle("Trove — "+r.name),e.parameters.coverTitle=r.name,e.parameters.coverSubtitle=r.about,e.parameters.coverImageUrl=r.cover_image_url,e.parameters.coverAvatarUrl=r.avatar_url,a.query().$promise.then(function(r){e.userItems=t("filter")(r,{mine:!0}),e.parameters.subcoverContent=e.userItems.length+" items"})},function(){e.errorId=r.userId}),e.parameters.isLight=!0}]),troveControllers.controller("ItemCtrl",["$scope","$routeParams","Page","Item",function(e,r,t,o){e.item=o.get({id:r.itemId},function(r){e.item=r,t.setTitle("Trove — "+r.title),e.parameters.coverTitle=r.title,e.parameters.coverSubtitle=""},function(){e.errorId=r.itemId})}]),troveControllers.controller("AboutCtrl",["$scope","Page",function(e,r){r.setTitle("Trove — About"),e.parameters.coverTitle="About",e.parameters.coverSubtitle="Discover and personalize everyday goods"}]);var troveDirectives=angular.module("troveDirectives",[]);troveDirectives.directive("focus",["$timeout",function(e){return function(r,t,o){r.$watch(o.focus,function(r){r&&e(function(){t[0].focus()},250)},!0)}}]);var troveFilters=angular.module("troveFilters",[]);troveFilters.filter("numResultsFilter",function(){return function(e){return 0==e?"No results":1==e?"1 result":e+" results"}});var troveServices=angular.module("troveServices",["ngResource"]),databaseUrl="https://api.mongolab.com/api/1/databases/trove-sample/collections",apiKey="qKGOKqNKwd9W5eKWubbMfPpZEU79BGOK";troveServices.factory("Page",[function(){var e="Trove";return{title:function(){return e},setTitle:function(r){e=r}}}]),troveServices.factory("Item",["$resource",function(e){var r=e(databaseUrl+"/items/:id",{apiKey:apiKey},{update:{method:"PUT"}});return r}]),troveServices.factory("Browse",["$resource",function(e){var r=e(databaseUrl+"/browse/:id",{apiKey:apiKey},{update:{method:"PUT"}});return r}]),troveServices.factory("User",["$resource",function(e){var r=e(databaseUrl+"/users/:id",{apiKey:apiKey},{update:{method:"PUT"}});return r}]);